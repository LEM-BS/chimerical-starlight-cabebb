function y(e){if(!e)return"";let t=e.startsWith("/")?e:`/${e}`;return t=t.replace(/\/index\.html$/,"/"),t=t.replace(/\.html$/,""),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t||"/"}function m(){if(typeof document=="undefined"||document.querySelector('script[src^="https://cdn.trustindex.io/loader.js"]'))return;let e=document.createElement("script");e.src="https://cdn.trustindex.io/loader.js?f82e0f551228447e6c06f9b86c7",e.async=!0,document.head.appendChild(e)}var L='a[href], button:not([disabled]), [tabindex]:not([tabindex="-1"])';function E(e,t){let i=t?Array.from(t.querySelectorAll(L)):[],o=[];return e&&o.push(e),i.forEach(c=>{o.includes(c)||o.push(c)}),o}function b(e,t,i=()=>{}){var w;if(!e||!t)return()=>{};let o=["pointerdown","mousedown","touchstart"],c=n=>{if(!t.classList.contains("nav-open"))return;let r=n.target;r instanceof Node&&(t.contains(r)||e.contains(r)||i(!1))},s=n=>{if(t.classList.contains("nav-open")){if(n.key==="Escape"){n.preventDefault(),i(!0);return}if(n.key==="Tab"){let r=E(e,t);if(r.length===0){n.preventDefault();return}let u=r[0],d=r[r.length-1],p=document.activeElement;n.shiftKey?(p===u||!r.includes(p))&&(n.preventDefault(),typeof(d==null?void 0:d.focus)=="function"&&d.focus()):p===d&&(n.preventDefault(),typeof(u==null?void 0:u.focus)=="function"&&u.focus())}}},l=n=>{let r=n.target;r instanceof Element&&r.closest("a")&&i(!0)},a=E(e,t),f=(w=a.find(n=>n!==e))!=null?w:a[0];return f&&typeof f.focus=="function"&&f.focus(),o.forEach(n=>{document.addEventListener(n,c)}),document.addEventListener("keydown",s),t.addEventListener("click",l),()=>{o.forEach(n=>{document.removeEventListener(n,c)}),document.removeEventListener("keydown",s),t.removeEventListener("click",l)}}function v(e,t){if(!e||!t)return!1;let i=t.classList.toggle("nav-open");return e.classList.toggle("open",i),e.setAttribute("aria-expanded",String(i)),i}function x(){if(typeof document=="undefined")return;let e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-links");if(e&&t){let i=()=>t.classList.contains("nav-open"),o=null,c=()=>{o&&(o(),o=null)},s=(f=!1)=>{i()&&(t.classList.remove("nav-open"),e.classList.remove("open"),e.setAttribute("aria-expanded","false"),c(),f&&typeof e.focus=="function"&&e.focus())},l=()=>{o=b(e,t,f=>{s(f)})},a=()=>{typeof window!="undefined"&&window.innerWidth>=768&&(i()?s():e.setAttribute("aria-expanded","false"))};e.setAttribute("aria-expanded","false"),e.addEventListener("click",()=>{v(e,t)?(c(),l()):c()}),typeof window!="undefined"&&(a(),window.addEventListener("resize",a))}if(typeof window!="undefined"){let i=y(new URL(window.location.pathname,window.location.origin).pathname);i&&document.querySelectorAll(".main-nav a").forEach(o=>{let c=o.getAttribute("href");if(!c)return;let s=y(new URL(c,window.location.origin).pathname);s&&s===i&&o.setAttribute("aria-current","page")})}}function h(){x(),m()}typeof document!="undefined"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",h,{once:!0}):h());typeof window!="undefined"&&(window.loadTrustIndex=m,window.LEMNav={init:h,setupNav:x,loadTrustIndex:m,toggleNav:v,enableNavAccessibility:b});export{b as enableNavAccessibility,h as init,m as loadTrustIndex,x as setupNav,v as toggleNav};
