var b='a[href], button:not([disabled]), [tabindex]:not([tabindex="-1"])';function E(e){if(!e)return"";let t=e.startsWith("/")?e:`/${e}`;return t=t.replace(/\/index\.html$/,"/"),t=t.replace(/\.html$/,""),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t||"/"}function v(e){return e?Array.from(e.querySelectorAll(b)).filter(n=>n instanceof HTMLElement?!n.hasAttribute("disabled")&&n.tabIndex!==-1:!1):[]}function x(e,t,n){!e||!t||(t.classList.toggle("nav-open",n),e.classList.toggle("open",n),e.setAttribute("aria-expanded",String(!!n)))}function f(){if(typeof document=="undefined"||!document.querySelector(".ti-widget")||document.querySelector('script[src^="https://cdn.trustindex.io/loader.js"]'))return;let e=document.createElement("script");e.src="https://cdn.trustindex.io/loader.js?f82e0f551228447e6c06f9b86c7",e.async=!0,document.head.appendChild(e)}function u(e,t,n){if(!e||!t)return!1;let s=t.classList.contains("nav-open"),i=typeof n=="boolean"?n:!s;return x(e,t,i),i}function L(){if(typeof document=="undefined")return;let e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-links");if(e&&t){let n=null,s=()=>{document.removeEventListener("click",m,!0),document.removeEventListener("keydown",p,!0)},i=({restoreFocus:o=!0}={})=>{if(!t.classList.contains("nav-open")){s();return}u(e,t,!1),s(),o&&n&&typeof n.focus=="function"&&n.focus(),n=null},c=()=>{let o=v(t);if(o.length>0){o[0].focus();return}e.focus()},m=o=>{let r=o.target;r instanceof Node&&(t.contains(r)||e.contains(r)||i({restoreFocus:!1}))},p=o=>{if(!t.classList.contains("nav-open"))return;if(o.key==="Escape"){o.preventDefault(),i(),e.focus();return}if(o.key!=="Tab")return;let r=v(t),a=e?[e,...r]:r;if(a.length===0){o.preventDefault(),e.focus();return}let y=a[0],h=a[a.length-1],l=document.activeElement;o.shiftKey?(l===y||!t.contains(l))&&(o.preventDefault(),h.focus()):l===h&&(o.preventDefault(),y.focus())},g=()=>{t.classList.contains("nav-open")||(n=document.activeElement instanceof HTMLElement?document.activeElement:e,u(e,t,!0),document.addEventListener("click",m,!0),document.addEventListener("keydown",p,!0),c())},w=()=>{typeof window!="undefined"&&window.innerWidth>=768&&(i({restoreFocus:!1}),u(e,t,!1))};e.setAttribute("aria-expanded","false"),e.addEventListener("click",()=>{t.classList.contains("nav-open")?i():g()}),t.addEventListener("click",o=>{(o.target instanceof HTMLElement?o.target.closest("a"):null)&&i()}),typeof window!="undefined"&&(w(),window.addEventListener("resize",w))}if(typeof window!="undefined"){let n=E(new URL(window.location.pathname,window.location.origin).pathname);n&&document.querySelectorAll(".main-nav a").forEach(s=>{let i=s.getAttribute("href");if(!i)return;let c=E(new URL(i,window.location.origin).pathname);c&&c===n&&s.setAttribute("aria-current","page")})}}function d(){try{L(),f()}finally{typeof document!="undefined"&&document.documentElement.classList.remove("pre-hydrate")}}typeof document!="undefined"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d,{once:!0}):d());typeof window!="undefined"&&(window.loadTrustIndex=f,window.LEMNav={init:d,setupNav:L,loadTrustIndex:f,toggleNav:u});export{d as init,f as loadTrustIndex,L as setupNav,u as toggleNav};
