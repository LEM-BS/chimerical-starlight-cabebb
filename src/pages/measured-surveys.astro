---
import BaseLayout from '../layouts/BaseLayout.astro';
import ServiceContent from '../components/ServiceContent.astro';
import { areaSelectorOptions } from '../data/areas';
import { createServiceSeo } from '../utils/structuredData';
import { getEntry } from 'astro:content';

const measuredSurveyFaqs = [
  {
    question: 'What deliverables do measured surveys include?',
    answer:
      'We supply 2D floorplans as standard and can add elevations, sections or topographical data depending on your project. Files are provided in PDF and CAD-ready formats for architects and planners.',
  },
  {
    question: 'How long does a typical site visit take?',
    answer:
      'Most homes are captured within half a day, while larger or multi-storey properties can take a full day. We plan the visit around access requirements to minimise disruption.',
  },
  {
    question: 'Can you provide measured surveys for planning applications?',
    answer:
      'Yes, we regularly prepare planning-ready drawings with the detail needed for extensions, conversions and compliance packs. We liaise with designers to ensure the outputs meet submission standards.',
  },
];

const description =
  'Measured building surveys and 2D floorplans for extensions, planning and documentation across Deeside, Chester, Flintshire and the wider North West.';

const { seo: baseSeo, pageUrl } = createServiceSeo({
  title: 'Measured Building Surveys | LEM Building Surveying',
  description,
  canonicalPath: '/measured-surveys',
  serviceName: 'Measured Building Surveys',
  faqs: measuredSurveyFaqs,
  review: {
    author: 'Architect in Chester',
    body: 'The measured survey drawings were accurate, well-labelled and delivered on schedule, allowing our planning submission to stay on track.',
    ratingValue: 5,
    datePublished: '2024-04-10',
  },
});

const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: 'Home',
      item: 'https://www.lembuildingsurveying.co.uk/',
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: 'Services',
      item: 'https://www.lembuildingsurveying.co.uk/services',
    },
    {
      '@type': 'ListItem',
      position: 3,
      name: 'Measured Building Surveys',
      item: pageUrl,
    },
  ],
};

const seo = {
  ...baseSeo,
  structuredData: [...baseSeo.structuredData, breadcrumbSchema],
};

const entry = await getEntry('services', 'measured-surveys');
const { Content } = await entry.render();
---

<BaseLayout seo={seo}>

  <section class="hero">
    <div class="hero-container">
      <h1>Measured Building Surveys &amp; Floorplans</h1>
      <p>Accurate, professional property measurement and floorplans for renovations, extensions, and documentation.</p>
      <a class="cta-button" href="/enquiry">Request a Survey</a>
    </div>
  </section>

  <ServiceContent entry={entry}>
    <Content />

    <h2>Frequently Asked Questions</h2>
    <div class="faq-list">
      {measuredSurveyFaqs.map((faq, index) => (
        <details open={index === 0}>
          <summary>{faq.question}</summary>
          <p>{faq.answer}</p>
        </details>
      ))}
    </div>
  </ServiceContent>

  <section class="home-areas improved-areas">
    <div class="box-container">
      <div class="areas-header">
        <h2>Areas We Cover</h2>
        <p class="lead">Based in Connah’s Quay, we serve property owners across Flintshire, Chester and surrounding areas.</p>
      </div>
      <div class="areas-content">
        <div class="dropdown-card">
          <label class="dropdown-label" for="areaDropdown">Jump to an area:</label>
          <div class="custom-select">
            <select id="areaDropdown" onchange="handleAreaSelect(this)">
              <option value="">Select an area…</option>
              {areaSelectorOptions.map((area) => (
                <option value={area.permalink}>{area.name}</option>
              ))}
            </select>
            <span class="chevron">⌄</span>
          </div>
        </div>
        <p class="note"><strong>…and nearby towns across the region.</strong></p>
      </div>
    </div>
  </section>

  <script is:inline>
    /** @param {HTMLSelectElement} select */
    function handleAreaSelect(select) {
      if (select.value) window.location.href = select.value;
    }
  </script>

  <section class="home-get-started">
    <div class="box-container">
      <h2>Get a Quote or Ask a Question</h2>
      <p>We’re happy to help whether you’re ready to book or just comparing options.</p>
      <div class="center-cta">
        <a class="cta-button" href="/enquiry">Get My Quote</a>
      </div>
    </div>
  </section>

  <div class="sticky-cta">
    <a class="cta-button" href="/enquiry">Get a Quote</a>
  </div>

</BaseLayout>
