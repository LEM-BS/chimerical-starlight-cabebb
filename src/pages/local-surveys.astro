---
import BaseLayout from '../layouts/BaseLayout.astro';
import AreaDirectory from '../components/AreaDirectory.astro';
import { areaPages, getAreaAnchor, getAreaPermalink } from '../data/areas';
import { buildLocalBusinessSchema, SITE_URL } from '../utils/structuredData';

const areaParagraphs: Record<string, string[]> = {
  flint: [
    'We offer professional home, damp, and building surveys in Flint. Our detailed assessments ensure that every property is thoroughly evaluated. Serving Flint and surrounding areas in Flintshire and Cheshire.',
  ],
  buckley: [
    'Expert surveys in Buckley covering home surveys, damp surveys, and building surveys. Our comprehensive reports help you make informed decisions about your property.',
  ],
  mold: [
    'Our services in Mold include detailed home surveys, damp assessments, and building surveys to ensure your property is safe and well-maintained.',
  ],
  'connahs-quay': [
    'We specialise in home, damp, and building surveys in Connah’s Quay. Our tailored services help ensure that every property is accurately assessed.',
  ],
  broughton: [
    'We deliver comprehensive home, damp, and building surveys in Broughton. Our expert team provides thorough evaluations to give you peace of mind.',
  ],
  saltney: [
    'Our Saltney services include professional home, damp, and building surveys. We ensure accurate property evaluations with detailed inspections.',
  ],
  hawarden: [
    'Providing expert surveys in Hawarden, including home, damp, and building assessments. Our comprehensive inspections ensure your property’s safety and value.',
  ],
  ewloe: [
    'We offer comprehensive surveys in Ewloe, including detailed home, damp, and building surveys to ensure your property is thoroughly assessed.',
  ],
  'northop-hall': [
    'Our Northop Hall services include expert home, damp, and building surveys. We provide comprehensive assessments to support your property decisions.',
  ],
  northop: [
    'We deliver expert home, damp, and building surveys in Northop, ensuring thorough evaluations that help you manage your property effectively.',
  ],
  oakenholt: [
    'Expert surveys in Oakenholt include detailed home, damp, and building assessments to ensure your property is comprehensively evaluated.',
  ],
  shotton: [
    'Our Shotton services include expert home, damp, and building surveys designed to provide a complete evaluation of your property.',
  ],
  queensferry: [
    'Expert home, damp, and building surveys in Queensferry ensure your property is thoroughly assessed and maintained. We serve Queensferry and surrounding areas.',
  ],
  tarporley: [
    'Our Tarporley services include comprehensive home, damp, and building surveys to help you make informed property decisions.',
  ],
  waverton: [
    'We provide expert surveys in Waverton, including home, damp, and building assessments designed to ensure your property is safe and well-maintained.',
  ],
  hoole: [
    'Expert home, damp, and building surveys in Hoole are designed to provide you with accurate property evaluations and ensure peace of mind.',
  ],
  boughton: [
    'We offer comprehensive home, damp, and building surveys in Boughton, providing detailed assessments to ensure your property is evaluated accurately.',
  ],
  'vicars-cross': [
    'Our services in Vicars Cross include expert home, damp, and building surveys designed to maintain your property’s optimal condition.',
  ],
  wrexham: [
    'We support Wrexham homeowners with RICS Level 2 and Level 3 surveys, targeted damp investigations and measured surveys for renovations across the borough.',
    'Explore how our Wrexham surveyor helps with terraces, rural homes and retrofit projects across North East Wales.',
  ],
  'north-wales': [
    'North Wales clients rely on us for region-wide RICS surveys, damp diagnostics and measured building surveys that suit coastal and rural properties.',
    'Discover our North Wales coverage, including bespoke advice for exposed locations, barn conversions and holiday lets.',
  ],
};

const defaultParagraphs = (name: string) => [
  `We provide RICS home surveys, damp investigations and independent reporting for homeowners, buyers and landlords in ${name}. Expect practical advice tailored to the construction and common defects found locally.`,
  `Book a survey in ${name} to receive a clear report covering urgent repairs, moisture risks and maintenance planning so you can move ahead with confidence.`,
];

const areas = areaPages.map(({ slug, name }) => ({
  id: getAreaAnchor(slug),
  slug,
  navLabel: name,
  title: `${name} Home and Building Surveys`,
  paragraphs: areaParagraphs[slug] ?? defaultParagraphs(name),
  href: getAreaPermalink(slug),
}));

const pageTitle = 'Local Home and Building Surveys | LEM Building Surveying';
const description =
  'Explore RICS survey coverage from LEM Building Surveying across Flintshire, Chester and Cheshire villages, with quick turnaround for home and damp reports.';
const canonicalPath = '/local-surveys';
const pageUrl = `${SITE_URL}${canonicalPath}`;

const localBusinessSchema = buildLocalBusinessSchema({
  description,
  url: pageUrl,
  areaServed: areaPages.map((area) => area.name),
});

const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: 'Home',
      item: `${SITE_URL}/`,
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: 'Areas We Cover',
      item: `${SITE_URL}/local-surveys`,
    },
  ],
};

const seo = {
  title: pageTitle,
  description,
  canonicalPath,
  openGraph: {
    title: pageTitle,
    description,
    url: pageUrl,
    type: 'website',
  },
  twitter: {
    title: pageTitle,
    description,
  },
  structuredData: [localBusinessSchema, breadcrumbSchema],
};
---

<BaseLayout seo={seo}>

  <section class="hero hero-plain">
    <div class="hero-container">
      <h1>Local Home and Building Surveys</h1>
      <p>Expert property assessments by LEM Building Surveying Ltd</p>
    </div>
  </section>

  <section class="area-navigation">
    <div class="box-container">
      <p><strong>Jump to a location:</strong></p>
      <nav class="area-nav">
        {areas.map((area) => (
          <a href={`#${area.id}`}>{area.navLabel}</a>
        ))}
      </nav>
    </div>
  </section>

  {areas.map((area) => (
    <section id={area.id}>
      <div class="box-container">
        <span class="anchor" id={`${area.id}-anchor`}></span>
        <h2>{area.title}</h2>
        {area.paragraphs.map((text) => (
          <p>{text}</p>
        ))}
        <p>
          <a href={area.href}>
            Learn more about surveys in {area.navLabel}
          </a>
        </p>
        <p>
          <strong>Contact:</strong> Call <a href="tel:07378732037">07378 732037</a>
          or <a class="inline-link" href="/enquiry">request a survey quote online</a>
          for a rapid response.
        </p>
      </div>
    </section>
  ))}
  <AreaDirectory />
</BaseLayout>
